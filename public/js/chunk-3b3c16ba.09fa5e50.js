(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b3c16ba","chunk-cb017d94"],{"2c20":function(t,e,a){"use strict";var s=a("ea8a"),n=a.n(s);n.a},"54f9":function(t,e,a){"use strict";var s=a("e922"),n=a.n(s);n.a},a1c4:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"section-to-print"}},[t.data?t._e():a("h3",{staticClass:"text-center"},[t._v("Pleas go back and click print again. click here to go "),a("router-link",{attrs:{to:"/gexpense"}},[t._v("Back")])],1),t.data?a("vs-row",[a("vs-col",{attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center","vs-w":"12"}},[a("h2",{staticClass:"text-center"},[t._v("Noble Navigation and Shipping Line")])]),a("vs-col",{attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center","vs-w":"12"}},[a("p",{staticClass:"text-center"},[t._v("General Expense")])]),a("vs-col",{attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center","vs-w":"12"}},[a("p",{staticClass:"text-center"},[t._v(t._s(t.data.month))])]),a("vs-col",{staticClass:"mt-3",attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center","vs-w":"12"}},[a("table",{staticStyle:{"page-break-inside":"auto"}},[a("tr",{staticClass:"p-2 border border-solid bg-primary text-white d-theme-border-grey-light",staticStyle:{"page-break-inside":"avoid","page-break-after":"auto"}},[a("th",[t._v("Date")]),a("th",[t._v("Detail")]),a("th",[t._v("Created By")]),a("th",[t._v("Amount")])]),t._l(t.reveresed,function(e){return a("tr",{staticClass:"p-2 border border-solid d-theme-border-grey-light"},[a("td",[t._v(t._s(t._f("formatDate")(e.created_at)))]),a("td",[t._v(t._s(e.detail))]),a("td",[t._v(t._s(e.created_by))]),a("td",[t._v(t._s(t._f("currency")(e.amount)))])])}),a("tr",{staticClass:"p-2 border border-solid d-theme-border-grey-light"},[a("td",{attrs:{colspan:"2"}}),a("td",{attrs:{colspan:"2"}},[t._v("Total: "+t._s(t._f("currency")(t.data.total)))])])],2)])],1):t._e()],1)},n=[],i=(a("551c"),{data:function(){return{data:""}},computed:{reveresed:function(){return this.data.expenses.reverse()}},mounted:function(){console.log(this.$route.params.data),this.data=this.$route.params.data}}),r=i,o=(a("2c20"),a("2877")),c=Object(o["a"])(r,s,n,!1,null,"72161218",null);e["default"]=c.exports},aa55:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vx-card",{attrs:{title:"All "+t.pageTitle}},[a("app-transaction",{attrs:{type:t.type}})],1)},n=[],i=(a("551c"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["gexpense"==t.type?a("vs-collapse",{attrs:{type:"border"}},t._l(t.monthlyData,function(e,s){return a("vs-collapse-item",[a("div",{staticClass:"text-white",attrs:{slot:"header"},slot:"header"},[t._v("\n        "+t._s(e.month)+" - "+t._s(t._f("currency")(e.total))+" "),a("vs-button",{staticClass:"hidden lg:inline-flex",staticStyle:{float:"right","margin-top":"-5px"},attrs:{color:"#ffc400",type:"filled"},on:{click:function(e){return t.print(s)}}},[t._v("Print")])],1),a("h6",[t._v("Number of rows")]),a("v-select",{staticClass:"md:w-1/6 mb-base",staticStyle:{"margin-bottom":"-12px !important"},attrs:{clearable:!1,options:t.options},on:{input:t.setMax},model:{value:t.maxItem,callback:function(e){t.maxItem=e},expression:"maxItem"}}),a("vs-table",{attrs:{pagination:"","max-items":t.maxItem,search:"",data:e.expenses},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,function(e,n){return a("vs-tr",{key:n,attrs:{data:e}},[a("vs-td",{attrs:{data:s[n].created_at}},[t._v("\n              "+t._s(t._f("formatDate")(s[n].created_at))+"\n            ")]),a("vs-td",{attrs:{data:s[n].trip}},[t._v("\n              "+t._s(s[n].trip)+"\n            ")]),a("vs-td",{attrs:{data:s[n].detail}},[t._v("\n              "+t._s(s[n].detail)+"\n            ")]),a("vs-td",{attrs:{data:s[n].amount}},[t._v("\n              "+t._s(t._f("currency")(s[n].amount))+"\n            ")]),a("vs-td",{attrs:{data:s[n].created_by}},[t._v("\n              "+t._s(s[n].created_by)+"\n            ")]),a("vs-td",{attrs:{data:s[n].id}},[a("vs-dropdown",{staticStyle:{cursor:"pointer"},attrs:{color:"success","vs-trigger-click":""}},[a("vs-button",{staticClass:"btn-drop",attrs:{type:"filled",icon:"more_horiz"}}),a("vs-dropdown-menu",[t.$auth.check([t.type+"_edit"])?a("vs-dropdown-item",{on:{click:function(e){return t.edit(s[n].id)}}},[t._v("Edit")]):t._e(),t.$auth.check([t.type+"_delete"])?a("vs-dropdown-item",{on:{click:function(e){return t.confirmDelete(s[n].id)}}},[t._v("Delete")]):t._e()],1)],1)],1)],1)})}}],null,!0)},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"created_at"}},[t._v("Date")]),a("vs-th",{attrs:{"sort-key":"trip"}},[t._v("Trip")]),a("vs-th",{attrs:{"sort-key":"detail"}},[t._v("Detail")]),a("vs-th",{attrs:{"sort-key":"amount"}},[t._v("Amount")]),a("vs-th",{attrs:{"sort-key":"created_by"}},[t._v("Created_by")]),a("vs-th",[t._v("Action")])],1)],2)],1)}),1):a("div",[a("h6",[t._v("Number of rows")]),a("v-select",{staticClass:"md:w-1/6 mb-base",staticStyle:{"margin-bottom":"-12px !important"},attrs:{clearable:!1,options:t.options},on:{input:t.setMax},model:{value:t.maxItem,callback:function(e){t.maxItem=e},expression:"maxItem"}}),a("vs-table",{attrs:{pagination:"","max-items":t.maxItem,search:"",data:t.trans},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,function(e,n){return a("vs-tr",{key:n,attrs:{data:e}},[a("vs-td",{attrs:{data:s[n].created_at}},[t._v("\n            "+t._s(t._f("formatDate")(s[n].created_at))+"\n          ")]),a("vs-td",{attrs:{data:s[n].trip}},[t._v("\n            "+t._s(s[n].trip)+"\n          ")]),a("vs-td",{attrs:{data:s[n].detail}},[t._v("\n            "+t._s(s[n].detail)+"\n          ")]),a("vs-td",{attrs:{data:s[n].amount}},[t._v("\n            "+t._s(t._f("currency")(s[n].amount))+"\n          ")]),a("vs-td",{attrs:{data:s[n].created_by}},[t._v("\n            "+t._s(s[n].created_by)+"\n          ")]),a("vs-td",{attrs:{data:s[n].id}},[a("vs-dropdown",{staticStyle:{cursor:"pointer"},attrs:{color:"success","vs-trigger-click":""}},[a("vs-button",{staticClass:"btn-drop",attrs:{type:"filled",icon:"more_horiz"}}),a("vs-dropdown-menu",[t.$auth.check([t.type+"_edit"])?a("vs-dropdown-item",{on:{click:function(e){return t.edit(s[n].id)}}},[t._v("Edit")]):t._e(),t.$auth.check([t.type+"_delete"])?a("vs-dropdown-item",{on:{click:function(e){return t.confirmDelete(s[n].id)}}},[t._v("Delete")]):t._e()],1)],1)],1)],1)})}}])},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"created_at"}},[t._v("Date")]),a("vs-th",{attrs:{"sort-key":"trip"}},[t._v("Trip")]),a("vs-th",{attrs:{"sort-key":"detail"}},[t._v("Detail")]),a("vs-th",{attrs:{"sort-key":"amount"}},[t._v("Amount")]),a("vs-th",{attrs:{"sort-key":"created_by"}},[t._v("Created_by")]),a("vs-th",[t._v("Action")])],1)],2)],1),a("div",{staticClass:"demo-alignment"},[a("vs-popup",{staticClass:"holamundo",attrs:{title:t.pageTitle,active:t.popupActive},on:{"update:active":function(e){t.popupActive=e}}},[a("vx-input-group",{staticClass:"mb-base"},[t.$auth.check(["date"])?a("datepicker",{staticClass:"text-center",model:{value:t.transactionForm.date,callback:function(e){t.$set(t.transactionForm,"date",e)},expression:"transactionForm.date"}}):t._e()],1),a("vx-input-group",{staticClass:"mb-base"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Details",name:"detail",placeholder:"Detail"},model:{value:t.transactionForm.detail,callback:function(e){t.$set(t.transactionForm,"detail",e)},expression:"transactionForm.detail"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("detail"),expression:"errors.has('detail')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("detail")))])],1),a("vx-input-group",{staticClass:"mb-base"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],attrs:{name:"amount",label:"Amount",placeholder:"Amount"},model:{value:t.transactionForm.amount,callback:function(e){t.$set(t.transactionForm,"amount",e)},expression:"transactionForm.amount"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("amount"),expression:"errors.has('amount')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("amount")))])],1),"Add"==t.action?a("vs-button",{staticClass:"mt-5 block",attrs:{type:"filled"},on:{click:function(e){return e.preventDefault(),t.addGexpense(e)}}},[t._v("Save")]):a("vs-button",{staticClass:"mt-5 block",attrs:{type:"filled"},on:{click:function(e){return e.preventDefault(),t.submitForm(e)}}},[t._v("Save")])],1)],1),a("div",{staticClass:"demo-alignment"},[a("vs-popup",{staticClass:"holamundo",attrs:{title:"Are you sure?",active:t.deleteConfirmation},on:{"update:active":function(e){t.deleteConfirmation=e}}},[a("p",[t._v("This action can not undone! If this is mistake click cancel")]),a("div",{staticClass:"flex justify-between flex-wrap"},[a("vs-button",{staticClass:"mt-4 shadow-lg",attrs:{type:"gradient",color:"danger"},on:{click:function(e){return t.deleteTr(t.deleteId)}}},[t._v("Delete")]),a("vs-button",{staticClass:"mt-4 shadow-lg",attrs:{type:"gradient",color:"success"},on:{click:function(e){t.deleteConfirmation=!1}}},[t._v("Cancel")])],1)])],1),"gexpense"==t.type?a("vs-button",{staticClass:"floating-btn",attrs:{color:"success",type:"gradient","icon-pack":"feather",icon:"icon-plus"},on:{click:t.addGexpenseForm}}):t._e()],1)}),r=[],o=a("4a7a"),c=a.n(o),d=a("a1c4"),l=a("fa33"),u={props:{type:{type:String,required:!0}},data:function(){return{printExpense:!1,printData:[],popupActive:!1,deleteConfirmation:!1,deleteId:"",action:"",monthlyData:[],transactionForm:{id:"",date:"",detail:"",amount:""},trans:[],options:[10,20,50,100],maxItem:localStorage.getItem("maxItem")?localStorage.getItem("maxItem"):10}},computed:{pageTitle:function(){return"gexpense"==this.type?this.action+" General Expense":this.action+" "+this.type}},methods:{print:function(t){var e=this.monthlyData[t];this.$router.push({name:"General_Expense_Print",params:{data:e}})},submitForm:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.popupActive=!1,t.transactionForm.date=t.$options.filters.dateToString(t.transactionForm.date),t.axios.post("transaction/"+t.transactionForm.id,t.transactionForm).then(function(e){e.data.notify&&t.$vs.notify({title:e.data.notify.title,text:e.data.notify.message,color:e.data.notify.type}),"success"==e.data.status&&(t.transactionForm={id:"",date:"",detail:"",amount:""}),t.update()}))})},addGexpenseForm:function(){this.action="Add",this.transactionForm={id:"",date:new Date,detail:"",amount:""},this.popupActive=!0},addGexpense:function(){var t=this;this.popupActive=!1,this.$validator.validateAll().then(function(e){e&&(t.transactionForm.date=t.$options.filters.dateToString(t.transactionForm.date),t.transactionForm.type="gexpense",t.axios.post("transaction/addGexpense",t.transactionForm).then(function(e){e.data.notify&&t.$vs.notify({title:e.data.notify.title,text:e.data.notify.message,color:e.data.notify.type}),"success"==e.data.status&&(t.popupActive=!1,t.transactionForm={id:"",date:"",detail:"",amount:""}),t.update()}).catch(function(e){422==e.response.status&&(console.log(e.response.data.errors),t.$vs.notify({title:"Validation error",text:"Error in your data.Please check your input",color:"warning"}))}))})},edit:function(t){var e=this;this.action="Edit",this.axios.get("transaction/"+t).then(function(a){e.transactionForm.id=t,e.transactionForm.date=new Date(a.data.created_at),e.transactionForm.detail=a.data.detail,e.transactionForm.amount=a.data.amount,e.popupActive=!0})},confirmDelete:function(t){this.deleteConfirmation=!0,this.deleteId=t},deleteTr:function(t){var e=this;this.deleteConfirmation=!1,this.$auth.check([this.type+"_delete"])?this.axios.delete("transaction/"+t).then(function(t){t.data.notify&&e.$vs.notify({title:t.data.notify.title,text:t.data.notify.message,color:t.data.notify.type}),e.update()}):this.$vs.notify({title:"Unauthorised Access !",text:"You are not authorized for some information.",color:"danger"})},setMax:function(){this.maxItem<10&&(this.maxItem=10),localStorage.setItem("maxItem",this.maxItem)},update:function(){var t=this;"gexpense"==this.type?this.axios.get("/transactions/getMonthlyGexpense").then(function(e){t.monthlyData=e.data}):this.axios.get("/transaction/list",{params:{type:this.type}}).then(function(e){t.trans=e.data})}},watch:{$route:function(t,e){this.type=t.meta.type,this.update()}},mounted:function(){var t=this;this.update(),Echo.connector.pusher.config.auth.headers["Authorization"]="Bearer "+this.$auth.token(),Echo.private("App.User."+this.$auth.user().id).notification(function(e){t.update()})},components:{Datepicker:l["a"],"v-select":c.a,MonthlyExpensePrintView:d["default"]}},p=u,v=(a("54f9"),a("2877")),m=Object(v["a"])(p,i,r,!1,null,null,null),h=m.exports,f={data:function(){return{type:this.$route.meta.type}},computed:{pageTitle:function(){return"gexpense"==this.type?"General Expense":this.type}},watch:{$route:function(t,e){this.type=t.meta.type}},components:{"app-transaction":h}},_=f,y=Object(v["a"])(_,s,n,!1,null,null,null);e["default"]=y.exports},e922:function(t,e,a){},ea8a:function(t,e,a){}}]);
//# sourceMappingURL=chunk-3b3c16ba.09fa5e50.js.map